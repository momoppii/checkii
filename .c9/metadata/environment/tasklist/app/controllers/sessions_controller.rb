{"changed":true,"filter":false,"title":"sessions_controller.rb","tooltip":"/tasklist/app/controllers/sessions_controller.rb","value":"class SessionsController < ApplicationController\n  def new\n  end\n\n  def create\n    email = params[:session][:email].downcase\n    password = params[:session][:password]\n    if login(email, password)\n      flash[:success] = 'ログインに成功しました。'\n      redirect_to root_path\n    else\n      flash.now[:danger] = 'ログインに失敗しました。'\n      render :new\n    end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    flash[:seccess] = 'ログアウトしました。'\n    redirect_to root_url\n  end\n  \n  private\n  \n  def login(email, password)\n    @user = User.find_by(email: email)\n    if @user && @user.authenticate(password)\n      #ログイン成功\n      session[:user_id] = @user.id\n      return true\n    else\n      #ログイン失敗\n      return false\n    end\n  end\nend\n","undoManager":{"mark":1,"position":-1,"stack":[[{"start":{"row":9,"column":23},"end":{"row":9,"column":24},"action":"insert","lines":["u"],"id":17},{"start":{"row":9,"column":24},"end":{"row":9,"column":25},"action":"insert","lines":["r"]},{"start":{"row":9,"column":25},"end":{"row":9,"column":26},"action":"insert","lines":["l"]}],[{"start":{"row":9,"column":26},"end":{"row":9,"column":27},"action":"remove","lines":["h"],"id":17},{"start":{"row":9,"column":25},"end":{"row":9,"column":26},"action":"remove","lines":["t"]},{"start":{"row":9,"column":24},"end":{"row":9,"column":25},"action":"remove","lines":["a"]},{"start":{"row":9,"column":23},"end":{"row":9,"column":24},"action":"remove","lines":["p"]}]]},"ace":{"folds":[],"scrolltop":133,"scrollleft":0,"selection":{"start":{"row":9,"column":27},"end":{"row":9,"column":27},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1620788699095}